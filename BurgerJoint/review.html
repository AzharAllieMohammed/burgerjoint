<!DOCTYPE html>
<html lang="en">
<head>
    <title>Payment Form</title>
    <style>
        /* Add your CSS styling here */
    </style>
</head>
<body>

<div id="itemDetails">
    <p>Item Name: <span id="itemName"></span></p>
    <p>Item Price: <span id="itemPrice"></span></p>
</div>

<header>
    <h1>Payment</h1>
</header>

<main>


    <form id="paymentForm">
        <label for="name">Enter Name:</label><br>
        <input class="box" type="text" name="name" id="name" placeholder="Enter Name" required><br>

        <label for="surname">Enter Surname:</label><br>
        <input class="box" type="text" name="surname" id="surname" placeholder="Enter Surname" required><br>

        <label for="email">Enter Email:</label><br>
        <input class="box" type="email" name="email" id="email" placeholder="Enter Email" required><br>

        <label for="cardNumber">Card Number:</label><br>
        <input class="box" type="tel" name="cardNumber" id="cardNumber" placeholder="Enter card number"
               maxlength="16" minlength="16" pattern="[0-9]{16}" required><br>

        <label for="pin">Pin:</label><br>
        <input class="box" type="tel" name="pin" id="pin" placeholder="Enter Pin"
               maxlength="5" minlength="4" pattern="[0-9]{4,5}" required><br>

        <!-- Other input fields... -->

        <button class="btn" type="submit" onclick="checkAndRedirect()">Pay now</button>
        <button class="btn" onclick="location.href='menu.html'">Cancel</button>
    </form>
</main>

<script>
    // Retrieve item details from URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const itemName = urlParams.get('item_name');
    const itemPrice = urlParams.get('item_price');

    // Display item details on the review page
    const itemNameElement = document.getElementById('itemName');
    const itemPriceElement = document.getElementById('itemPrice');

    if (itemName && itemPrice) {
        itemNameElement.textContent = itemName;
        itemPriceElement.textContent = itemPrice;
    } else {
        itemNameElement.textContent = "Item details not available.";
        itemPriceElement.textContent = "";
    }

    let emailInput = document.getElementById("email");
    let paymentForm = document.getElementById("paymentForm");

    emailInput.addEventListener("input", function(event) {
        if (emailInput.validity.valid) {
            emailInput.setCustomValidity(""); // Clear custom validation message
        } else {
            emailInput.setCustomValidity("Please enter a valid email address.");
        }
    });


    function checkAndRedirect() {
        if (paymentForm.checkValidity()) {
            // Additional check for other required fields
            let requiredFields = paymentForm.querySelectorAll("[required]");
            let allFieldsFilled = true;

            requiredFields.forEach(function(field) {
                if (!field.value) {
                    allFieldsFilled = false;
                }
            });

            if (allFieldsFilled) {
                location.href = "thanks.html";
            }
        }
    }

    paymentForm.addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent default form submission behavior

        checkAndRedirect(); // Call your custom function
    });
</script>
</body>
</html>
